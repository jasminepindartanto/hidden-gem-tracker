---
// src/components/LocationSidebar.astro
// Menerima 'post' yang berisi data baris dari tabel lokasi_wisata
const { post } = Astro.props;

// Membuat URL Google Maps secara dinamis berdasarkan koordinat di database
const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${post.latitude},${post.longitude}`;
---

<div class="bg-slate-900/50 backdrop-blur-md rounded-[32px] p-6 shadow-2xl border border-slate-700 flex flex-col gap-6 w-full sticky top-24">
  
  <div class="relative w-full aspect-square rounded-2xl bg-slate-800 overflow-hidden border border-slate-700">
    <img 
      src={post.url_foto || "/images/map-placeholder.jpg"} 
      alt={post.dtw} 
      class="w-full h-full object-cover opacity-20 grayscale blur-[2px]"
    />
    <div class="absolute inset-0 flex flex-col items-center justify-center">
      <div class="w-10 h-10 bg-emerald-500 rounded-full flex items-center justify-center shadow-[0_0_20px_rgba(16,185,129,0.4)] border-4 border-slate-900">
        <div class="w-3 h-3 bg-white rounded-full animate-ping"></div>
      </div>
      <div class="mt-3 bg-slate-800/90 backdrop-blur-sm px-4 py-1.5 rounded-xl border border-slate-600">
        <p class="text-[10px] font-bold text-emerald-400 uppercase tracking-tight text-center">Destination Point</p>
      </div>
    </div>
  </div>

  <div class="space-y-2">
    <h3 class="text-lg font-bold text-white font-noto-serif">Location Details</h3>
    <p class="text-sm text-slate-400 leading-relaxed">
      {post.lokasi || "Alamat tidak tersedia"}
    </p>
  </div>

  <a 
    href={googleMapsUrl} 
    target="_blank"
    class="flex items-center justify-center gap-2 w-full py-4 bg-emerald-500 hover:bg-emerald-600 text-slate-950 rounded-2xl font-bold text-sm transition-all shadow-lg shadow-emerald-500/20 active:scale-95"
  >
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="10" r="3"/><path d="M12 21s-9-6-9-13a9 9 0 0 1 18 0c0 7-9 13-9 13z"/></svg>
    Petunjuk Arah (Maps)
  </a>

  <div class="grid grid-cols-2 border-t border-slate-800 pt-6">
    <div class="text-center border-r border-slate-800">
      <p class="text-[10px] uppercase tracking-widest text-slate-500 font-bold mb-1">Latitude</p>
      <p class="text-xs font-mono font-bold text-emerald-400">{post.latitude}</p>
    </div>
    <div class="text-center">
      <p class="text-[10px] uppercase tracking-widest text-slate-500 font-bold mb-1">Longitude</p>
      <p class="text-xs font-mono font-bold text-emerald-400">{post.longitude}</p>
    </div>
  </div>
</div>